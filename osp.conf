# -*- text -*-
##
## osp.conf -- Configuration for OSP running parameters
##
## $Id$

#######################################################################
#
# OSP configuration
#
osp {
    # OSP module running parameters
    default_running {   # This is the default running configuration section. Please do not touch it!!!
        loglevel = 1    # 0 - short, 1 - long */
    }

    running used {   # This is the used running configuration section.
    }

    # OSP provider parameters
    default_provider {  # This is the default provider configuration section. Please do not touch it!!!
        accelerate = no
        security = no
        spuri1 = http://osptestserver.transnexus.com:1080/osp
        # spuri1 = https://[1.2.3.4]:1443/osp
        spweight1 = 1000
        spweight2 = 1000
        spweight3 = 1000
        spweight4 = 1000
        privatekey = /usr/local/etc/raddb/pkey.pem
        localcert = /usr/local/etc/raddb/localcert.pem
        cacert0 = /usr/local/etc/raddb/cacert_0.pem
        cacert1 = /usr/etc/raddb/cacert_1.pem
        ssllifetime = 300
        persistence = 60000
        maxconnections = 20                     # 1 ~ 1000
        retrydelay = 0                          # 0 ~ 10
        retrylimit = 2                          # 0 ~ 100
        timeout = 10000                         # 200 ~ 60000
        deviceip = localhost
        deviceport = 5060
    }

    provider used {  # This is the used provider configuration section.
        spuri1 = http://127.0.0.1:1080/osp
        deviceip = 192.168.0.1
    }

    # RADIUS OSP mapping parameters
    default_mapping {   # This is the default mapping configuration section. Please do not touch it!!!
        radiusclienttype = 0                    # 0 - undefined, 1 - ACME, 2 - NexTone */
        ignoreddestinationlist = NULL
        callorigin = NULL                       # Only for NexTone
        transactionid = NULL
        callid = %{Acct-Session-Id}
        iscallinguri = yes
        callingnumber = %{Calling-Station-Id}   # From header
        iscalleduri = yes
        callednumber = %{Called-Station-Id}     # To header
        assertedid = NULL
        sourcedevice = NULL
        source = %{NAS-IP-Address}
        proxy = %{NAS-IP-Address}               # Only for NexTone
        destination = NULL
        destinationdevice = NULL
        destinationcount = NULL
        sourcenetworkid = NULL
        destinationnetworkid = NULL
        timestringformat = 0                    # 0 - time_t, 1 - ctime, 2 - NTP w/o week day, 3 - NTP */
        starttime = %{Acct-Session-Start-Time}
        altertime = NULL
        connecttime = NULL
        endtime = NULL
        duration = %{Acct-Session-Time}
        postdialdelayunit = 0                   # 0 - seconds, 1 - milliseconds */
        postdialdelay = NULL
        releasesource = NULL
        releasecause = %{Acct-Terminate-Cause}
        destinationprotocol = NULL
        inboundsessionid = NULL
        outboundsessionid = NULL
        forwardcodec = NULL
        reversecodec = NULL
        conferenceid = NULL
        reportstatistics = yes
        sendlostpackets = NULL
        sendlostfraction = NULL
        receivelostpackets = NULL
        receivelostfraction = NULL
        rtpdownstreamlostpackets = NULL
        rtpdownstreamlostfraction = NULL
        rtpupstreamlostpackets = NULL
        rtpupstreamlostfraction = NULL
        rtcpdownstreamlostpackets = NULL
        rtcpdownstreamlostfraction = NULL
        rtcpupstreamlostpackets = NULL
        rtcpupstreamlostfraction = NULL
        rtpdownstreamjittersamples = NULL
        rtpdownstreamjitterminimum = NULL
        rtpdownstreamjittermaximum = NULL
        rtpdownstreamjittermean = NULL
        rtpdownstreamjittervariance = NULL
        rtpupstreamjittersamples = NULL
        rtpupstreamjitterminimum = NULL
        rtpupstreamjittermaximum = NULL
        rtpupstreamjittermean = NULL
        rtpupstreamjittervariance = NULL
        rtcpdownstreamjittersamples = NULL
        rtcpdownstreamjitterminimum = NULL
        rtcpdownstreamjittermaximum = NULL
        rtcpdownstreamjittermean = NULL
        rtcpdownstreamjittervariance = NULL
        rtcpupstreamjittersamples = NULL
        rtcpupstreamjitterminimum = NULL
        rtcpupstreamjittermaximum = NULL
        rtcpupstreamjittermean = NULL
        rtcpupstreamjittervariance = NULL
        rtpdownstreamdelaysamples= NULL
        rtpdownstreamdelayminimum = NULL
        rtpdownstreamdelaymaximum = NULL
        rtpdownstreamdelaymean = NULL
        rtpdownstreamdelayvariance = NULL
        rtpupstreamdelaysamples = NULL
        rtpupstreamdelayminimum = NULL
        rtpupstreamdelaymaximum = NULL
        rtpupstreamdelaymean = NULL
        rtpupstreamdelayvariance = NULL
        rtcpdownstreamdelaysamples = NULL
        rtcpdownstreamdelayminimum = NULL
        rtcpdownstreamdelaymaximum = NULL
        rtcpdownstreamdelaymean = NULL
        rtcpdownstreamdelayvariance = NULL
        rtcpupstreamdelaysamples = NULL
        rtcpupstreamdelayminimum = NULL
        rtcpupstreamdelaymaximum = NULL
        rtcpupstreamdelaymean = NULL
        rtcpupstreamdelayvariance = NULL
        rtpdownstreamoctets = NULL
        rtpupstreamoctets = NULL
        rtcpdownstreamoctets = NULL
        rtcpupstreamoctets = NULL
        rtpdownstreampackets = NULL
        rtpupstreampackets = NULL
        rtcpdownstreampackets = NULL
        rtcpupstreampackets = NULL
        rfactorscaleindex = 4                   # 0 - 0.0001, 1 - 0.001, 2 - 0.01, 3 - 0.1, 4 - 1, 5 - 10, 6 - 100, 7 - 1000, 8 - 10000 */
        rtpdownstreamrfactor = NULL
        rtpupstreamrfactor = NULL
        rtcpdownstreamrfactor = NULL
        rtcpupstreamrfactor = NULL
        mosscaleindex = 4                       # 0 - 0.0001, 1 - 0.001, 2 - 0.01, 3 - 0.1, 4 - 1, 5 - 10, 6 - 100, 7 - 1000, 8 - 10000 */
        rtpdownstreammoscq = NULL
        rtpupstreammoscq = NULL
        rtcpdownstreammoscq = NULL
        rtcpupstreammoscq = NULL
        rtpdownstreammoslq = NULL
        rtpupstreammoslq = NULL
        rtcpdownstreammoslq = NULL
        rtcpupstreammoslq = NULL
        custominfo1 = NULL
        custominfo2 = NULL
        custominfo3 = NULL
        custominfo4 = NULL
    }

    ACME {  # This is the ACME mapping configuration section.
        radiusclienttype = 1
        callednumber = %{Acme-Primary-Routing-Number}       # Original called number
        # callednumber = %{Acme-Egress-Final-Routing-Number}  # Transaltaed called number
        assertedid = %{Acme-P-Asserted-ID}
        sourcedevice = %{Acme-Ingress-Remote-Addr}
        destination = %{Acme-Egress-Remote-Addr}
        timestringformat = 2
        starttime = %{h323-setup-time}
        connecttime = %{h323-connect-time}
        endtime = %{h323-disconnect-time}
        postdialdelayunit = 1
        postdialdelay = %{Acme-Post-Dial-Delay}
        releasesource = %{Acme-Disconnect-Initiator}
        releasecause = %{Acme-SIP-Status}       # SIP
        # releasecause = %{Acme-Disconnect-Cause} # ISDN
        destinationprotocol = %{Acme-Session-Protocol-Type}
        inboundsessionid = %{Acme-Session-Ingress-CallId}
        outboundsessionid = %{Acme-Session-Egress-CallId}
        forwardcodec = %{Acme-FlowType_FS1_F}
        reversecodec = %{Acme-FlowType_FS1_R}
        rtpdownstreamlostpackets = %{Acme-Calling-RTP-Packets-Lost_FS1}
        rtpupstreamlostpackets = %{Acme-Called-RTP-Packets-Lost_FS1}
        rtcpdownstreamlostpackets = %{Acme-Called-RTCP-Packets-Lost_FS1}
        rtcpupstreamlostpackets = %{Acme-Calling-RTCP-Packets-Lost_FS1}
        rtpdownstreamjittermaximum = %{Acme-Calling-RTP-MaxJitter_FS1}
        rtpdownstreamjittermean = %{Acme-Calling-RTP-Avg-Jitter_FS1}
        rtpupstreamjittermaximum = %{Acme-Called-RTP-MaxJitter_FS1}
        rtpupstreamjittermean = %{Acme-Called-RTP-Avg-Jitter_FS1}
        rtcpdownstreamjittermaximum = %{Acme-Called-RTCP-MaxJitter_FS1}
        rtcpdownstreamjittermean = %{Acme-Called-RTCP-Avg-Jitter_FS1}
        rtcpupstreamjittermaximum = %{Acme-Calling-RTCP-MaxJitter_FS1}
        rtcpupstreamjittermean = %{Acme-Calling-RTCP-Avg-Jitter_FS1}
        rtcpdownstreamdelaymaximum = %{Acme-Called-RTCP-MaxLatency_FS1}
        rtcpdownstreamdelaymean = %{Acme-Called-RTCP-Avg-Latency_FS1}
        rtcpupstreamdelaymaximum = %{Acme-Calling-RTCP-MaxLatency_FS1}
        rtcpupstreamdelaymean = %{Acme-Calling-RTCP-Avg-Latency_FS1}
        rtpdownstreamoctets = %{Acme-Calling-Octets_FS1}
        rtpupstreamoctets = %{Acme-Called-Octets_FS1}
        rtpdownstreampackets = %{Acme-Calling-Packets_FS1}
        rtpupstreampackets = %{Acme-Called-Packets_FS1}
        rfactorscaleindex = 2
        rtcpdownstreamrfactor = %{Acme-Called-R-Factor}
        rtcpupstreamrfactor = %{Acme-Calling-R-Factor}
        mosscaleindex = 2
        rtcpdownstreammoscq = %{Acme-Called-MOS}
        rtcpupstreammoscq = %{Acme-Calling-MOS}
        custominfo1 = %{Acme-Custom-VSA-200}
    }

    mapping NexTone {   # This is the NexTone mapping configuration section.
        radiusclienttype = 2
        callorigin = %{h323-call-origin}
        callid = %{h323-incoming-conf-id}
        iscallinguri = no
        iscalleduri = no
        callednumber = %{gw-rxd-cdn}            # Original called number
        # callednumber = %{gw-final-xlated-cdn}   # Transaltaed called number
        sourcedevice = %{h323-remote-address}
        proxy = %{NAS-IP-Address}
        destination = %{h323-remote-address}
        timestringformat = 3
        starttime = %{h323-setup-time}
        connecttime = %{h323-connect-time}
        endtime = %{h323-disconnect-time}
        releasesource = %{release-source}
        releasecause = %{h323-disconnect-cause} # ISDN
        destinationprotocol = %{session-protocol}
        inboundsessionid = %{h323-incoming-conf-id}
        outboundsessionid = %{h323-conf-id}
        reportstatistics = no
    }
}

