
# 
# Cron of root to trigger FreeRADIUS log rotation and detail file cleanup
# script.
#
# All log rotation and detail file cleanup scripts should be stored under
# "$RADIUS_HOME/.." to easy update.  $RADIUS_HOME must be set.
# 
## Log rotation for Linux
0 0 * * * . ./.bash_profile ; . $RADIUS_HOME/../logrotate_FreeRADIUS.sh
## Log rotation for Solaris
0 0 * * * . ./.bash_profile ; . $RADIUS_HOME/../logadm_FreeRADIUS.sh
## Detail clean up
0 0 * * * . ./.bash_profile ; . $RADIUS_HOME/../detailcleanup_FreeRADIUS.sh

#!/bin/sh
#
# logrotate_FreeRADIUS.sh
#
# This logrotate script is used to rotate FreeRADIUS radius.log file.  It should
# be triggered by cron of root daily.
# 
# logrotate_FreeRADIUS.sh       logrotate script file
# logrotate_FreeRADIUS.cfg      logrotate configuration file
# logrotate_FreeRADIUS.status   logrotate status file
# All files should be under $RADIUS_HOME, which must be defined.
#
/usr/sbin/logrotate -s $RADIUS_HOME/../logrotate_FreeRADIUS.status $RADIUS_HOME/../logrotate_FreeRADIUS.cfg

#
# logrotate_FreeRADIUS.cfg
#
# This logrotate configuration file is used to rotate FreeRADIUS radius.log
# file.  It should be triggered by cron of root daily.
#
# The FreeRADIUS log directory should be "/usr/local/var/log/radius".
# 
/usr/local/var/log/radius/radius.log {
        # Rotated daily  
        daily
        # Save 7 log files
        rotate 7
        # Create new file after rotation
        create
        # Missing file not issue error
        missingok
        # Compress old log files 
        compress
}

#!/bin/sh
#
# logadm_FreeRADIUS.sh
#
# This logadm script is used to rotate FreeRADIUS radius.log file.  It should
# be triggered by cron of root daily.
# 
#  "-C 7" to store 7 old log files.
#  "-p 1d" to rotate every day or "-p now" since cron run this command every day
#  "-z 0" to compress all old log files.
#
/usr/sbin/logadm -C 7 -p now -z 0 /usr/local/var/log/radius/radius.log

#!/bin/sh
#
# detailcleanup_FreeRADIUS.sh
#
# This script is used to cleanup FreeRADIUS detail files.  It removes the 
# detail files that are not modified more than 15 days.  It should be triggered
# by cron of root daily.
#
# The FreeRADIUS log directory should be "/usr/local/var/log/radius".
#
find /usr/local/var/log/radius/radacct/ -name 'detail-*' -mtime +15 -exec rm -f '{}' \;


